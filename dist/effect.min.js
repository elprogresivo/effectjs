/*!
 * EffectJs v0.1.0 - 2015-04-14 - Lib for DOM elements animation
 *
 * https://github.com/elprogresivo/effectjs
 *
 * Copyright 2015 Igor Popoff
 * Released under the MIT license.
 */

window.requestAnimationFrame||(window.requestAnimationFrame=function(a,b){var c=window.setTimeout(function(){a()},16);return c},window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)}));var effect=function(a){return a&&(effect.el=a),effect};effect.main=function(){},effect.tween=function(){},effect.utils={},effect.parser={},effect.animations={},effect.animationCounter=0,effect.elToTest=!1,effect.parseStyle=function(a,b){a=a[0];var c,d,e={},f="";for(i in b)if(d=a.style[i]||window.getComputedStyle(a,null).getPropertyValue(i))if(f+=i+", ",-1!=i.indexOf("color")){var g,h;c="color",d=effect.parser.parseColor(d),modifiedColor=effect.parser.parseColor(b[i]),g={0:parseInt(d.substr(1,2),16),1:parseInt(d.substr(3,2),16),2:parseInt(d.substr(5,2),16),hex:d},h={0:parseInt(modifiedColor.substr(1,2),16),1:parseInt(modifiedColor.substr(3,2),16),2:parseInt(modifiedColor.substr(5,2),16),hex:modifiedColor},e[i]={initial:g,modified:h,measureUnit:c}}else-1!=i.indexOf("transform")?(c="transform",transformObject=effect.parser.parseMatrix(d,b[i]),e[i]={initial:transformObject.initial,modified:transformObject.modified,measureUnit:c}):(c=effect.parser.parseUnitValue(b[i]),e[i]={initial:effect.parser.parseNumericValue(d),modified:effect.parser.parseNumericValue(b[i]),measureUnit:c});return a.style["will-change"]=f,e},effect.animate=function(a,b,c){function d(a){effect.animations[j].counter++,e(effect.animations[j].el,i),effect.animations[j].timeoutId=effect.animations[j].requestAnimationId=requestAnimationFrame(d),effect.animations[j].counter>=effect.animations[j].lastFrame&&(cancelAnimationFrame(effect.animations[j].requestAnimationId),effect.animations[j].el.style["will-change"]=null,effect.animations[j]=null,c&&c())}function e(a,b){var c,d;d=effect.animations[j].counter/effect.animations[j].lastFrame;for(c in b)"color"===b[c].measureUnit?g(a,b,c,d):"transform"===b[c].measureUnit?h(a,b,c,d):""!==b[c].measureUnit&&f(a,b,c,d)}function f(a,b,c,d){a.style[c]=parseFloat(b[c].initial+(b[c].modified-b[c].initial)*d).toFixed(2)+b[c].measureUnit}function g(a,b,c,d){var e=0,f="";for(e;2>=e;e++)f+=effect.utils.rgbToHex(Math.round(b[c].initial[e]+(b[c].modified[e]-b[c].initial[e])*d));a.style[c]="#"+f}function h(a,b,c,d){var e,f=0,g=[];for(f;f<b[c].initial.length;f++)g[f]=Math.round(b[c].initial[f]+(b[c].modified[f]-b[c].initial[f])*d);e=6===g.length?"matrix":"matrix3d",a.style[c]=e+"("+g.join(",")+")"}var i,j=++effect.animationCounter,k=Date.now();a instanceof HTMLElement||(b=arguments[0],c=arguments[1],a=this.el),i=effect.parseStyle(a,b),effect.animations[j]={},effect.animations[j].el=a[0],effect.animations[j].startTime=0,effect.animations[j].endTime=0,effect.animations[j].durration=0,effect.animations[j].frames=[],effect.animations[j].currentFrame=0,effect.animations[j].currentTime=k,effect.animations[j].lastFrame=0,effect.animations[j].step=0,effect.animations[j].fps=60,effect.animations[j].counter=0,effect.animations[j].timeoutId=null,effect.animations[j].requestAnimationId=0,effect.animations[j].step=Math.round(1e3/effect.animations[j].fps),effect.animations[j].lastFrame=Math.round((b&&b.duration?b.duration:1)*effect.animations[j].fps),effect.animations[j].startTime=window.performance.now?window.performance.now():Date.now(),effect.animations[j].requestAnimationId=requestAnimationFrame(d)},effect.utils.createTestEl=function(){var a=document.createElement("div");a.style.visibility="hidden",document.body.appendChild(a),effect.elToTest=a,effect.elToTest.style.transform="translateY(0px)"},effect.utils.convert2dTo3dMatrix=function(a){var b=[],c=[];return a.map(function(a,b){c.push(a),1===b||3===b?c.push(0):5===b&&c.push(1)}),c.map(function(a,c){2===c||5===c||8===c?b.push(0):6===c&&(b.push(0),b.push(0),b.push(1),b.push(0)),b.push(a)},this),b},effect.utils.rgbToHex=function(a){var b,a=parseInt(a);return b=a.toString(16),1===b.length&&(b="0"+b),b},effect.parser.parseColor=function(a){var b;return-1!==a.indexOf("#")?a:(b=a.match(/(\d+)/g),a="#"+effect.utils.rgbToHex(b[0])+effect.utils.rgbToHex(b[1])+effect.utils.rgbToHex(b[2]))},effect.parser.parseUnitValue=function(a){return a.replace(/(\d+)/,"")},effect.parser.parseNumericValue=function(a){return"auto"===a&&(a="0px"),parseInt(a.match(/(\d+)/)[0])},effect.parser.parseMatrix=function(a,b){var c,d;effect.elToTest||effect.utils.createTestEl(),"none"===a&&(a="matrix(1,0,0,1,0,0)");var c=a.match(/(\d+)/g).map(function(a){return parseInt(a)});effect.elToTest.style.transform=b;var d=window.getComputedStyle(effect.elToTest,null).getPropertyValue("transform");return d=d.match(/(\d+)[^d]/g).map(function(a){return parseInt(a)}),c.length===d.length?{initial:c,modified:d}:c.length<d.length?(c=effect.utils.convert2dTo3dMatrix(c),{initial:c,modified:d}):void 0},effect.easing={test1:function(a){return-Math.cos(a*Math.PI)/2+.5},test2:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)}};